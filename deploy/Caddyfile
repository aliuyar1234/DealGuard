{
  email {$TLS_EMAIL}
  acme_ca https://acme-v02.api.letsencrypt.org/directory
}

{$APP_DOMAIN} {
  encode zstd gzip
  log {
    output stdout
    format json
  }

  @api path /api/* /docs* /openapi.json /redoc* /health /ready
  request_body @api {
    max_size 55MB
  }
  reverse_proxy @api backend:8000
  reverse_proxy frontend:3000

  header {
    Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    X-Content-Type-Options "nosniff"
    X-Frame-Options "DENY"
    Referrer-Policy "no-referrer"
  }
}
