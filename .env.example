# ===========================================
# DealGuard Environment Configuration
# ===========================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!

# ----- Application (REQUIRED) -----
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
APP_SECRET_KEY=GENERATE_A_SECURE_KEY_HERE
APP_ENV=development
APP_DEBUG=false
CORS_ORIGINS=http://localhost:3000

# ----- Database -----
DB_USER=dealguard
DB_PASSWORD=change-me
DB_NAME=dealguard
DATABASE_URL=postgresql+asyncpg://dealguard:change-me@postgres:5432/dealguard
DATABASE_SYNC_URL=postgresql://dealguard:change-me@postgres:5432/dealguard

# ----- Redis (Queue & Cache) -----
REDIS_PASSWORD=change-me
REDIS_URL=redis://:change-me@redis:6379/0

# ----- Auth Provider -----
# Use "dev" for local development (no Supabase required)
# Use "supabase" for production
AUTH_PROVIDER=dev

# ----- Supabase Auth (only if AUTH_PROVIDER=supabase) -----
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
SUPABASE_JWT_SECRET=your-jwt-secret

# ----- AI Provider -----
# Choose provider: "anthropic" (production) or "deepseek" (development)
AI_PROVIDER=deepseek

# ----- Anthropic AI -----
ANTHROPIC_API_KEY=sk-ant-...

# ----- DeepSeek AI -----
DEEPSEEK_API_KEY=sk-...
DEEPSEEK_MODEL=deepseek-chat

# ----- S3 Storage (MinIO for local) -----
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=change-me
S3_ENDPOINT=http://minio:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=change-me
S3_BUCKET=dealguard-documents
S3_REGION=eu-central-1

# ----- Secrets via files (recommended for production) -----
# APP_SECRET_KEY_FILE=/run/secrets/app_secret_key
# DATABASE_URL_FILE=/run/secrets/database_url
# DATABASE_SYNC_URL_FILE=/run/secrets/database_sync_url
# REDIS_URL_FILE=/run/secrets/redis_url
# SUPABASE_JWT_SECRET_FILE=/run/secrets/supabase_jwt_secret
# SUPABASE_SERVICE_ROLE_KEY_FILE=/run/secrets/supabase_service_role_key
# ANTHROPIC_API_KEY_FILE=/run/secrets/anthropic_api_key
# DEEPSEEK_API_KEY_FILE=/run/secrets/deepseek_api_key
# S3_ACCESS_KEY_FILE=/run/secrets/s3_access_key
# S3_SECRET_KEY_FILE=/run/secrets/s3_secret_key
# MINIO_ROOT_PASSWORD_FILE=/run/secrets/minio_root_password
# GRAFANA_ADMIN_PASSWORD_FILE=/run/secrets/grafana_admin_password
# ALERT_WEBHOOK_URL_FILE=/run/secrets/alert_webhook_url

# ----- Single Tenant Mode -----
# For self-hosted deployments
SINGLE_TENANT_MODE=true

# ----- Frontend (Next.js) -----
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# ----- Edge / TLS (production) -----
APP_DOMAIN=example.com
TLS_EMAIL=admin@example.com

# ----- Resource limits (optional) -----
# BACKEND_CPU_LIMIT=1.0
# BACKEND_MEM_LIMIT=1g
# WORKER_CPU_LIMIT=1.0
# WORKER_MEM_LIMIT=1g
# FRONTEND_CPU_LIMIT=0.5
# FRONTEND_MEM_LIMIT=512m
# POSTGRES_CPU_LIMIT=1.0
# POSTGRES_MEM_LIMIT=1g
# REDIS_CPU_LIMIT=0.5
# REDIS_MEM_LIMIT=512m
# MINIO_CPU_LIMIT=1.0
# MINIO_MEM_LIMIT=1g
# EDGE_CPU_LIMIT=0.5
# EDGE_MEM_LIMIT=256m

# ----- Backup settings (optional) -----
# PG_BACKUP_INTERVAL_SECONDS=86400
# PG_BACKUP_RETENTION_DAYS=7
# MINIO_BACKUP_INTERVAL_SECONDS=86400
# MINIO_BACKUP_RETENTION_DAYS=7

# ----- Observability settings (optional) -----
# PROMETHEUS_RETENTION=15d
